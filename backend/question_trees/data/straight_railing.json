{
    "job_type": "straight_railing",
    "version": "1.0",
    "display_name": "Straight Railing",
    "category": "railing",
    "required_fields": [
        "linear_footage", "location", "application", "railing_height",
        "top_rail_profile", "infill_style", "post_mount_type", "finish", "installation"
    ],
    "questions": [
        {
            "id": "linear_footage",
            "text": "What is the total linear footage of railing needed?",
            "type": "measurement",
            "unit": "feet",
            "required": true,
            "hint": "Measure along the run. If multiple sections, give us the total. Include returns and corners.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "location",
            "text": "Interior or exterior railing?",
            "type": "choice",
            "options": ["Exterior", "Interior", "Both — some sections inside, some outside"],
            "required": true,
            "hint": "Exterior railings need weather-resistant finish. Interior can use clear coat or raw steel.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "application",
            "text": "Residential or commercial?",
            "type": "choice",
            "options": ["Residential", "Commercial / public building", "Industrial"],
            "required": true,
            "hint": "This determines which building code applies — commercial has stricter requirements.",
            "depends_on": null,
            "branches": {
                "Commercial / public building": ["ada_required"],
                "Residential": ["ada_required"]
            }
        },
        {
            "id": "ada_required",
            "text": "Is ADA compliance required?",
            "type": "choice",
            "options": ["Yes — ADA compliant handrail required", "No", "Not sure"],
            "required": false,
            "hint": "ADA requires graspable handrail (1.25-2\" diameter round or equivalent), extensions at top and bottom, and specific mounting heights. Commercial buildings almost always require ADA compliance.",
            "depends_on": "application",
            "branches": null
        },
        {
            "id": "railing_height",
            "text": "What railing height?",
            "type": "choice",
            "options": ["36\" (residential code minimum)", "42\" (commercial code minimum / IBC)", "48\" (extra tall / child safety)", "Custom height"],
            "required": true,
            "hint": "IRC R312: 36\" min for residential. IBC 1015: 42\" min for commercial. Measured from walking surface to top of rail.",
            "depends_on": null,
            "branches": {
                "Custom height": ["custom_height"]
            }
        },
        {
            "id": "custom_height",
            "text": "What custom height (in inches)?",
            "type": "measurement",
            "unit": "inches",
            "required": false,
            "hint": "Must still meet minimum code: 36\" residential, 42\" commercial.",
            "depends_on": "railing_height",
            "branches": null
        },
        {
            "id": "top_rail_profile",
            "text": "What top rail profile?",
            "type": "choice",
            "options": ["1-1/2\" round tube (ADA graspable)", "1-1/4\" round tube (ADA graspable)", "Square tube 1-1/2\"", "Square tube 2\"", "Flat bar cap (1-1/2\" x 1/4\")", "Flat bar cap (2\" x 1/4\")", "Wood cap rail (by others)"],
            "required": true,
            "hint": "Round tube 1.25-2\" OD is required for ADA-compliant handrails. Square tube and flat bar are for decorative railings where a separate handrail is provided.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "infill_style",
            "text": "What baluster/infill style?",
            "type": "choice",
            "options": ["Vertical square bar (traditional)", "Vertical round bar", "Horizontal bars", "Cable infill", "Glass panels", "Flat bar (contemporary)", "Mesh/expanded metal", "None (open — just posts and top rail)"],
            "required": true,
            "hint": null,
            "depends_on": null,
            "branches": {
                "Cable infill": ["cable_diameter", "cable_hardware"],
                "Glass panels": ["glass_type"],
                "Vertical square bar (traditional)": ["baluster_spacing"],
                "Vertical round bar": ["baluster_spacing"],
                "Horizontal bars": ["horizontal_bar_spacing"],
                "Flat bar (contemporary)": ["baluster_spacing"]
            }
        },
        {
            "id": "baluster_spacing",
            "text": "Baluster spacing?",
            "type": "choice",
            "options": ["4\" max clear (code compliant — standard)", "3-1/2\" clear (tighter look)", "Custom spacing"],
            "required": false,
            "hint": "4\" max clear space is code requirement (prevents a 4\" sphere from passing through).",
            "depends_on": "infill_style",
            "branches": null
        },
        {
            "id": "horizontal_bar_spacing",
            "text": "Horizontal bar spacing?",
            "type": "choice",
            "options": ["4\" max clear (code compliant)", "Even spacing (calculate based on height)", "Custom spacing"],
            "required": false,
            "hint": "Note: some jurisdictions don't allow horizontal bars on exterior residential railings due to climbability concern.",
            "depends_on": "infill_style",
            "branches": null
        },
        {
            "id": "cable_diameter",
            "text": "Cable diameter?",
            "type": "choice",
            "options": ["1/8\" (standard residential)", "3/16\" (heavier look, commercial)", "1/4\" (heavy duty)"],
            "required": false,
            "hint": "1/8\" stainless cable is standard. Must maintain 3\" max spacing per code.",
            "depends_on": "infill_style",
            "branches": null
        },
        {
            "id": "cable_hardware",
            "text": "Cable tensioner hardware?",
            "type": "choice",
            "options": ["Through-post with swage fittings", "Surface-mount turnbuckle", "Quick-connect system (CableRail or similar)"],
            "required": false,
            "hint": "Through-post is cleanest. Quick-connect systems are faster to install but more expensive per run.",
            "depends_on": "infill_style",
            "branches": null
        },
        {
            "id": "glass_type",
            "text": "Glass panel type?",
            "type": "choice",
            "options": ["Tempered glass in post clamps", "Tempered glass in channel (base shoe)", "Laminated glass panels"],
            "required": false,
            "hint": "Glass is typically outsourced (tempered to size). We fabricate the steel frame/clamp system.",
            "depends_on": "infill_style",
            "branches": null
        },
        {
            "id": "post_mount_type",
            "text": "How will posts be mounted?",
            "type": "choice",
            "options": ["Surface mount flange (bolted on top of slab)", "Core drill (drilled into concrete)", "Side mount (bolted to face of slab/wall)", "Embedded in concrete (new pour)", "Welded to existing steel"],
            "required": true,
            "hint": "Surface mount is easiest to install. Core drill is cleaner looking. Side mount when no top surface is available.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "post_spacing",
            "text": "Post spacing?",
            "type": "choice",
            "options": ["4 ft on-center", "5 ft on-center", "6 ft on-center (standard)", "8 ft on-center (max for most codes)", "Custom spacing"],
            "required": false,
            "hint": "6 ft is the sweet spot — code compliant and structurally sound without being too heavy. 4 ft for cable railing.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "transitions",
            "text": "How many transitions does the railing have?",
            "type": "number",
            "required": false,
            "hint": "Count each corner, return to wall, end cap, or direction change. Each transition adds labor and material.",
            "depends_on": null,
            "branches": null
        },
        {
            "id": "finish",
            "text": "What finish?",
            "type": "choice",
            "options": ["Powder coat (most durable)", "Paint (in-house)", "Clear coat (shows steel grain)", "Galvanized", "Raw steel (no finish)"],
            "required": true,
            "hint": "Exterior railings should be powder coated or galvanized. Clear coat works well for interior.",
            "depends_on": null,
            "branches": {
                "Powder coat (most durable)": ["powder_coat_color"],
                "Paint (in-house)": ["paint_color"]
            }
        },
        {
            "id": "powder_coat_color",
            "text": "Powder coat color?",
            "type": "choice",
            "options": ["Black (most common)", "Bronze", "White", "Dark green", "Custom RAL color"],
            "required": false,
            "hint": null,
            "depends_on": "finish",
            "branches": null
        },
        {
            "id": "paint_color",
            "text": "Paint color?",
            "type": "text",
            "required": false,
            "hint": "Color name or paint code.",
            "depends_on": "finish",
            "branches": null
        },
        {
            "id": "installation",
            "text": "Do you need installation?",
            "type": "choice",
            "options": ["Full installation", "Shop pickup (no installation)", "Delivery only"],
            "required": true,
            "hint": null,
            "depends_on": null,
            "branches": {
                "Full installation": ["site_location"]
            }
        },
        {
            "id": "site_location",
            "text": "Where is the job site?",
            "type": "text",
            "required": false,
            "hint": "City or zip code for travel time.",
            "depends_on": "installation",
            "branches": null
        },
        {
            "id": "design_reference",
            "text": "Do you have any reference photos or design inspiration?",
            "type": "photo",
            "required": false,
            "hint": "Upload photos of the style you like, or photos of the existing space.",
            "depends_on": null,
            "branches": null
        }
    ]
}
